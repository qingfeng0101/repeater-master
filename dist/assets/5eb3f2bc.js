import{c as x,s as y,d as N,e as C}from "./ad89c71c.js";import{f as D,H as i,ad as h,A as S,l as m,j as n,u as a,o as p,aj as A,i as o,af as j,ae as _,ap as q,e as E,n as M,ai as P,ak as R,Q as V}from "./315a852e.js";import{M as b}from "./index.148f4d09.js";const w={class:"flex justify-end"},H=D({__name:"Action",props:{id:{type:Number,required:!1}},setup(B){const u=B,c=i(null),s=h({name:"",sets:[]}),d=i(!1);u.id&&(d.value=!0,x(u.id).then(t=>{const e=t.data;s.name=e.name,s.sets=e.sets,d.value=!1}));const F={name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"},sets:{type:"array",required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u9001\u5668",trigger:["blur","change"]}},f=i();y().then(t=>{f.value=t.data.map(e=>({label:e.index,value:e.index}))});const g=S();function k(){var t;(t=c.value)==null||t.validate(e=>{var r;e?(console.log("errors"),(r=b)==null||r.error("\u9A8C\u8BC1\u5931\u8D25")):(u.id?N(u.id,s):C(s)).then(I=>{var v;(v=b)==null||v.success("success"),g.push({name:"SenderSets"})})})}return(t, e)=>{const r=V("n-skeleton");return p(),m(a(R),{title:`${u.id?"\u7F16\u8F91":"\u6DFB\u52A0"}\u6DFB\u52A0STMP\u51ED\u8BC1`},{default:n(()=>[d.value?(p(),m(r,{key:0,text:"",repeat:12})):(p(),m(a(A),{key:1,ref_key:"formRef",ref:c,model:s,"label-placement":"left","label-width":160,rules:F,style:{maxWidth:"640px"}},{default:n(()=>[o(a(_),{label:"\u540D\u79F0:",path:"name"},{default:n(()=>[o(a(j),{value:s.name,"onUpdate:value":e[0]||(e[0]= l=>s.name=l),disabled:!!u.id},null,8,["value","disabled"])]),_:1}),o(a(_),{label:"\u53D1\u9001\u5668:",path:"sets"},{default:n(()=>[o(a(q),{value:s.sets,"onUpdate:value":e[1]||(e[1]= l=>s.sets=l),multiple:"",options:f.value},null,8,["value","options"])]),_:1}),E("div",w,[o(a(P),{onClick:k,type:"primary"},{default:n(()=>[M("\u63D0\u4EA4")]),_:1})])]),_:1},8,["model"]))]),_:1},8,["title"])}}});export{H as default};

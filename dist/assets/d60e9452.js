import{b as N,c as x,d as y}from "./3a8f2c57.js";import{f as C,H as f,ad as D,A as k,l as v,j as l,u as t,o as b,ar as U,y as h,i as s,ae as r,af as o,e as A,ai as R,n as w,aj as E,ak as P}from "./315a852e.js";import{M as c}from "./index.148f4d09.js";const V={class:"flex justify-end"},z=C({__name:"Action",props:{id:{type:Number,required:!1}},setup(g){const n=g,i=f(null),e=D({name:"",base_url:"",alerts:"",targets:"",rules:"",comment:""}),_={name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"},base_url:{required:!0,message:"\u8BF7\u8F93\u5165BaseUrl",trigger:"blur"}},d=f(!1);n.id&&(d.value=!0,N(n.id).then(m=>{const a=m.data;e.name=a.name,e.base_url=a.base_url,e.alerts=a.alerts,e.targets=a.targets,e.rules=a.rules,e.comment=a.comment,d.value=!1}));const B=k();function F(){var m;(m=i.value)==null||m.validate(a=>{var u;a?(console.log("errors"),(u=c)==null||u.error("\u9A8C\u8BC1\u5931\u8D25")):(n.id?x(n.id,e):y(e)).then(q=>{var p;(p=c)==null||p.success("success"),B.push({name:"PrometheusDatasourceList"})})})}return(m, a)=>(b(),v(t(P),{title:`${n.id?"\u7F16\u8F91":"\u6DFB\u52A0"}Prometheus\u6570\u636E\u6E90`},{default:l(()=>[d.value?(b(),v(t(U),{key:0,text:"",repeat:12})):h("",!0),s(t(E),{ref_key:"formRef",ref:i,model:e,"label-placement":"left","label-width":160,rules:_,style:{maxWidth:"640px"}},{default:l(()=>[s(t(r),{label:"\u540D\u79F0:",path:"name"},{default:l(()=>[s(t(o),{value:e.name,"onUpdate:value":a[0]||(a[0]= u=>e.name=u)},null,8,["value"])]),_:1}),s(t(r),{label:"BaseUrl:",path:"base_url"},{default:l(()=>[s(t(o),{value:e.base_url,"onUpdate:value":a[1]||(a[1]= u=>e.base_url=u)},null,8,["value"])]),_:1}),s(t(r),{label:"Alerts:",path:"alerts"},{default:l(()=>[s(t(o),{value:e.alerts,"onUpdate:value":a[2]||(a[2]= u=>e.alerts=u)},null,8,["value"])]),_:1}),s(t(r),{label:"Targets:",path:"targets"},{default:l(()=>[s(t(o),{value:e.targets,"onUpdate:value":a[3]||(a[3]= u=>e.targets=u)},null,8,["value"])]),_:1}),s(t(r),{label:"Rules:",path:"rules"},{default:l(()=>[s(t(o),{value:e.rules,"onUpdate:value":a[4]||(a[4]= u=>e.rules=u)},null,8,["value"])]),_:1}),s(t(r),{label:"\u5907\u6CE8: ",path:"comment"},{default:l(()=>[s(t(o),{value:e.comment,"onUpdate:value":a[5]||(a[5]= u=>e.comment=u),type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1}),A("div",V,[s(t(R),{onClick:F,type:"primary"},{default:l(()=>[w("\u63D0\u4EA4")]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"]))}});export{z as default};

import{n as c,a as C,b as v,c as x}from "./b4128dcd.js";import{f as z,A as B,ad as D,H as o,c as N,i as d,j as E,u as m,G as t,au as R,av as l,aw as W,ai as p,o as b,n as A,am as F}from "./315a852e.js";import{M as f}from "./index.148f4d09.js";import{_ as h}from "./d304026b.js";const L=z({__name:"index",setup(S){const r=B(),y=[{title:"\u540D\u79F0",key:"name",minWidth:"150"},{title:"\u7F13\u5B58\u72B6\u6001",key:"cache_staus",align:"center",minWidth:"100",render(e){return t(R,{dot:!0,type:n.value?n.value[e.name]?"success":"error":"info"})}},{title:"\u72B6\u6001",key:"status",minWidth:"100",render(e){return t(l,{type:e.deleted_at===0?"success":"warning",size:"small",round:!0},{default:()=>e.deleted_at===0?"\u6D3B\u52A8":"\u7981\u7528"})}},{title:"\u6807\u7B7E\u96C6\u5408\u5217\u8868",key:"label_set_list",render(e){return e.label_set_list.map(a=>t(W,{delay:500,trigger:"hover"},{trigger:()=>t(l,{class:"mb-4px mr-8px",size:"small"},{default:()=>a.service_name||a.namespace||a.instance}),default:()=>JSON.stringify(a)}))}},{title:"\u901A\u77E5\u53D1\u9001\u5668\u96C6",key:"sender_set.name",minWidth:"150"},{title:"\u901A\u77E5\u76EE\u6807",key:"contacts",minWidth:"250",render(e){return e.contacts.map(a=>t(l,{type:"primary",size:"small",class:"mr-8px"},{default:()=>a.name}))}},{title:"\u5907\u6CE8",key:"comment",minWidth:"300"},{title:"\u64CD\u4F5C",key:"actions",minWidth:"180",render(e){return[t(p,{size:"small",type:"primary",class:"mr-4px",onClick:()=>r.push({name:"PrometheusNotifyRuleEdit",params:{id:e.id}})},{default:()=>"\u7F16\u8F91"}),t(h,{size:"small",type:"warning",class:"mr-4px",onClick:()=>_(e)},{default:()=>"\u7981\u7528"}),t(h,{size:"small",type:"error",onClick:()=>k(e)},{default:()=>"\u5220\u9664"})]}}],u=D({page:1,pageSize:15,showSizePicker:!0,pageSizes:[10,15,25,30,50,100],onChange: e=>{u.page=e},onPageSizeChange: e=>{u.pageSize=e,u.page=1}}),s=o([]);c().then(e=>{s.value=e.data});const n=o();C().then(e=>{n.value=e.data});function g(){r.push({name:"PrometheusNotifyRuleAdd"})}function _(e){v(e.id).then(()=>{var a;c().then(i=>{s.value=i.data}),(a=f)==null||a.success("success")})}function k(e){x(e.id).then(()=>{var a;s.value.splice(s.value.indexOf(e),1),(a=f)==null||a.success("success")})}return(e, a)=>(b(),N("div",null,[d(m(p),{type:"primary",onClick:g,class:"mb-8px"},{default:E(()=>[A("\u6DFB\u52A0")]),_:1}),d(m(F),{data:s.value,pagination:u,columns:y,"row-key": i=>i.id},null,8,["data","pagination","row-key"])]))}});export{L as default};
